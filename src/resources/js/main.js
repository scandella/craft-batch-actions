(()=>{"use strict";var e={973:(e,t,s)=>{s.r(t)},128:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NeoBatchActionBar=t.MatrixBatchActionBar=void 0;class s{constructor(e,t,s){this.input=e,this.blockClass=t,this.blockSelectedClass=s,this._$buttons={},this.$bar=$('<div class="block-batch-action-bar"/>').prependTo(e.$container),this.$selectCheckbox=this._initSelection().appendTo(this.$bar),this.$buttons=this._generateButtons().appendTo(this.$bar),this.$menuContainer=this._generateMenu().appendTo(this.$bar);const n=this.$bar.add(this.$menu);this.supportedActions().forEach((([e,t,s])=>{const o=e.toLowerCase();this._$buttons[o]=n.find(`[data-bba-bn="button.${o}"]`),this._$buttons[o].on("activate",(e=>{e.preventDefault();const t=this[o];"function"==typeof t&&(t.bind(this)(this.getSelectedBlocks()),this._refreshButtons())}))})),this._refreshButtons()}supportedActions(){return[["Expand","expand",this.isBlockCollapsed.bind(this)],["Collapse","collapse",this.isBlockExpanded.bind(this)],["Enable","enabled",this.isBlockDisabled.bind(this)],["Disable","disabled",this.isBlockEnabled.bind(this)],["Delete","remove",e=>!0]]}isBlockCollapsed(e){return!this.isBlockExpanded(e)}isBlockDisabled(e){return!this.isBlockEnabled(e)}_initSelection(){const e=$('<div class="checkbox">');let t=!1,s=!1;return e.on("mousedown",(n=>{n.which===Garnish.PRIMARY_CLICK&&(s||(this.input.on(this.addBlockEvent,(e=>{var t;(null!==(t=e.$block)&&void 0!==t?t:e.block.$container).addClass(this.input.blockSelect.settings.selectedClass)})),s=!0),t=!0,e.toggleClass("checked"),e.hasClass("checked")?this.input.blockSelect.selectAll():this.input.blockSelect.deselectAll())})),this.input.blockSelect.on("selectionChange",(s=>{t?t=!1:e.removeClass("checked"),this._refreshButtons()})),e}_refreshButtons(){const e={},t=[];this.supportedActions().forEach((([s,n,o])=>{t.push(s),e[s]={icon:n,check:o,enable:!1}})),this.input.blockSelect.$selectedItems.each(((s,n)=>{const o=$(n);t.forEach((t=>{var s;(s=e[t]).enable||(s.enable=e[t].check(o))}))})),t.forEach((t=>{this._$buttons[t.toLowerCase()].toggleClass("disabled",!1===e[t].enable)}))}_generateButtons(){const e=$('<div class="btngroup"/>');return this.supportedActions().forEach((([t,s,n])=>this._generateAction(t,s,"btn").appendTo(e))),e}_generateMenu(){var e;const t=$('<div class="block-batch-action-bar_menu hidden"/>'),s=$('<button type="button" class="btn settings icon menubtn">Actions</button>').appendTo(t);this.$menu=$('<div class="menu"/>').appendTo(t);const n=$('<ul class="padded"/>').appendTo(this.$menu);this.supportedActions().forEach((([e,t])=>$("<li/>").append(this._generateAction(e,t)).appendTo(n))),s.menubtn();let o=null!==(e=this.$buttons.width())&&void 0!==e?e:0;return this.$bar.on("resize",(()=>{var e,s;o||(o=null!==(e=this.$buttons.width())&&void 0!==e?e:0);const n=(null!==(s=this.$bar.width())&&void 0!==s?s:0)<o;this.$buttons.toggleClass("hidden",n),t.toggleClass("hidden",!n)})),t}_generateAction(e,t,s){const n=void 0!==s,o=e.toLowerCase();null!=t||(t=o);const i=$(`<${n?"button":"a"}/>`).attr({"aria-label":e,"data-bba-bn":`button.${o}`,"data-icon":t}).text(e);return n&&i.addClass(s),i}expand(e){e.forEach((e=>e.expand()))}collapse(e){e.forEach((e=>e.collapse()))}}t.MatrixBatchActionBar=class extends s{constructor(e){super(e,"matrixblock","sel"),this.input=e,super.addBlockEvent="blockAdded"}isBlockExpanded(e){return!e.hasClass("collapsed")}isBlockEnabled(e){return!e.hasClass("disabled")}getSelectedBlocks(){return this.input.$container.find(`.${this.blockClass}.${this.blockSelectedClass}`).map(((e,t)=>$(t).data("block"))).get()}enable(e){e.forEach((e=>e.enable()))}disable(e){e.forEach((e=>e.disable()))}delete(e){window.confirm("Are you sure you want to delete the selected blocks?")&&e.forEach((e=>e.selfDestruct()))}},t.NeoBatchActionBar=class extends s{constructor(e){super(e,"ni_block","is-selected"),this.input=e,super.addBlockEvent="addBlock"}isBlockExpanded(e){return e.hasClass("is-expanded")}isBlockEnabled(e){return e.hasClass("is-enabled")}getSelectedBlocks(){return this.input.getBlocks().filter((e=>e.isSelected()))}enable(e){var t;null===(t=e.find((e=>!e.isEnabled())))||void 0===t||t.enable()}disable(e){var t;null===(t=e.find((e=>e.isEnabled())))||void 0===t||t.disable()}delete(e){window.confirm("Are you sure you want to delete the selected blocks?")&&e.forEach((e=>this.input.removeBlock(e)))}}}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,s),i.exports}s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=s(128);s(973);const t=[];Garnish.on(Craft.MatrixInput,"afterInit",(s=>{t.push(new e.MatrixBatchActionBar(s.target))})),void 0!==(null===Neo||void 0===Neo?void 0:Neo.Input)&&Garnish.on(Neo.Input,"afterInit",(s=>{t.push(new e.NeoBatchActionBar(s.target))}))})()})();
//# sourceMappingURL=main.js.map