(()=>{"use strict";var e={973:(e,t,n)=>{n.r(t)},128:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NeoBatchActionBar=t.MatrixBatchActionBar=void 0;class n{constructor(e,t,n){this.input=e,this.blockClass=t,this.blockSelectedClass=n,this.$bar=$('<div class="block-batch-action-bar"/>').prependTo(e.$container),this.$selectCheckbox=this._generateSelectCheckbox().appendTo(this.$bar),this.$buttons=this._generateButtons().appendTo(this.$bar),this.$menuContainer=this._generateMenu().appendTo(this.$bar);const a=this.$bar.add(this.$menu);a.find('[data-bba-bn="button.expand"]').on("activate",(e=>{e.preventDefault(),this.expand(this.getSelectedBlocks())})),a.find('[data-bba-bn="button.collapse"]').on("activate",(e=>{e.preventDefault(),this.collapse(this.getSelectedBlocks())})),a.find('[data-bba-bn="button.enable"]').on("activate",(e=>{e.preventDefault(),this.enable(this.getSelectedBlocks())})),a.find('[data-bba-bn="button.disable"]').on("activate",(e=>{e.preventDefault(),this.disable(this.getSelectedBlocks())})),a.find('[data-bba-bn="button.delete"]').on("activate",(e=>{e.preventDefault(),this.delete(this.getSelectedBlocks())}))}supportedActions(){return[["Expand","expand"],["Collapse","collapse"],["Enable","enabled"],["Disable","disabled"],["Delete","remove"]]}_generateSelectCheckbox(){const e=$('<div class="checkbox">');let t=!1,n=!1;return e.on("mousedown",(a=>{a.which===Garnish.PRIMARY_CLICK&&(n||(this.input.on(this.addBlockEvent,(e=>{var t;(null!==(t=e.$block)&&void 0!==t?t:e.block.$container).addClass(this.input.blockSelect.settings.selectedClass)})),n=!0),t=!0,e.toggleClass("checked"),e.hasClass("checked")?this.input.blockSelect.selectAll():this.input.blockSelect.deselectAll())})),this.input.blockSelect.on("selectionChange",(n=>{t?t=!1:e.removeClass("checked")})),e}_generateButtons(){const e=$('<div class="btngroup"/>');return this.supportedActions().forEach((([t,n])=>this._generateAction(t,n,"btn").appendTo(e))),e}_generateMenu(){var e;const t=$('<div class="block-batch-action-bar_menu hidden"/>'),n=$('<button type="button" class="btn settings icon menubtn">Actions</button>').appendTo(t);this.$menu=$('<div class="menu"/>').appendTo(t);const a=$('<ul class="padded"/>').appendTo(this.$menu);this.supportedActions().forEach((([e,t])=>$("<li/>").append(this._generateAction(e,t)).appendTo(a))),n.menubtn();let s=null!==(e=this.$buttons.width())&&void 0!==e?e:0;return this.$bar.on("resize",(()=>{var e,n;s||(s=null!==(e=this.$buttons.width())&&void 0!==e?e:0);const a=(null!==(n=this.$bar.width())&&void 0!==n?n:0)<s;this.$buttons.toggleClass("hidden",a),t.toggleClass("hidden",!a)})),t}_generateAction(e,t,n){const a=void 0!==n,s=e.toLowerCase();null!=t||(t=s);const o=$(`<${a?"button":"a"}/>`).attr({"aria-label":e,"data-bba-bn":`button.${s}`,"data-icon":t}).text(e);return a&&o.addClass(n),o}expand(e){e.forEach((e=>e.expand()))}collapse(e){e.forEach((e=>e.collapse()))}}t.MatrixBatchActionBar=class extends n{constructor(e){super(e,"matrixblock","sel"),this.input=e,super.addBlockEvent="blockAdded"}getSelectedBlocks(){return this.input.$container.find(`.${this.blockClass}.${this.blockSelectedClass}`).map(((e,t)=>$(t).data("block"))).get()}enable(e){e.forEach((e=>e.enable()))}disable(e){e.forEach((e=>e.disable()))}delete(e){window.confirm("Are you sure you want to delete the selected blocks?")&&e.forEach((e=>e.selfDestruct()))}},t.NeoBatchActionBar=class extends n{constructor(e){super(e,"ni_block","is-selected"),this.input=e,super.addBlockEvent="addBlock"}getSelectedBlocks(){return this.input.getBlocks().filter((e=>e.isSelected()))}enable(e){var t;null===(t=e.find((e=>!e.isEnabled())))||void 0===t||t.enable()}disable(e){var t;null===(t=e.find((e=>e.isEnabled())))||void 0===t||t.disable()}delete(e){window.confirm("Are you sure you want to delete the selected blocks?")&&e.forEach((e=>this.input.removeBlock(e)))}}}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=n(128);n(973);const t=[];Garnish.on(Craft.MatrixInput,"afterInit",(n=>{t.push(new e.MatrixBatchActionBar(n.target))})),void 0!==(null===Neo||void 0===Neo?void 0:Neo.Input)&&Garnish.on(Neo.Input,"afterInit",(n=>{t.push(new e.NeoBatchActionBar(n.target))}))})()})();
//# sourceMappingURL=main.js.map