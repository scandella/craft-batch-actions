{"version":3,"file":"js/main.js","mappings":"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","sources":["webpack://craft-block-batch-actions/./client/src/scripts/BlockBatchActionBar.ts","webpack://craft-block-batch-actions/webpack/bootstrap","webpack://craft-block-batch-actions/webpack/runtime/make namespace object","webpack://craft-block-batch-actions/./client/src/scripts/main.ts"],"sourcesContent":["import { InputBlock, MatrixInputBlock, NeoInputBlock } from './types/InputBlock'\nimport { InputField, NeoInputField } from './types/InputField'\n\ninterface ActivateEvent {\n  preventDefault: () => void\n}\n\nabstract class BlockBatchActionBar {\n  public $bar: JQuery\n  public $buttons: JQuery\n  public $menuContainer: JQuery\n  public $menu: JQuery\n\n  constructor (\n    public readonly input: InputField,\n    protected readonly blockClass: string,\n    protected readonly blockSelectedClass: string\n  ) {\n    this.$bar = $('<div class=\"block-batch-action-bar\"/>').prependTo(input.$container)\n    this.$buttons = this.generateButtons().prependTo(this.$bar)\n    this.$menuContainer = this._generateMenu().prependTo(this.$bar)\n\n    const $actions = this.$bar.add(this.$menu)\n    $actions.find('[data-bba-bn=\"button.expand\"]').on('activate', (e: ActivateEvent) => {\n      e.preventDefault()\n      this.expand(this.getSelectedBlocks())\n    })\n    $actions.find('[data-bba-bn=\"button.collapse\"]').on('activate', (e: ActivateEvent) => {\n      e.preventDefault()\n      this.collapse(this.getSelectedBlocks())\n    })\n    $actions.find('[data-bba-bn=\"button.enable\"]').on('activate', (e: ActivateEvent) => {\n      e.preventDefault()\n      this.enable(this.getSelectedBlocks())\n    })\n    $actions.find('[data-bba-bn=\"button.disable\"]').on('activate', (e: ActivateEvent) => {\n      e.preventDefault()\n      this.disable(this.getSelectedBlocks())\n    })\n    $actions.find('[data-bba-bn=\"button.delete\"]').on('activate', (e: ActivateEvent) => {\n      e.preventDefault()\n      this.delete(this.getSelectedBlocks())\n    })\n  }\n\n  protected generateButtons (): JQuery {\n    const $expand = this._generateAction('Expand', null, 'btn')\n    const $collapse = this._generateAction('Collapse', null, 'btn')\n    const $enable = this._generateAction('Enable', 'enabled', 'btn')\n    const $disable = this._generateAction('Disable', 'disabled', 'btn')\n    const $delete = this._generateAction('Delete', 'remove', 'btn')\n    const $bar = $('<div class=\"btngroup\"/>')\n      .append($expand)\n      .append($collapse)\n      .append($enable)\n      .append($disable)\n      .append($delete)\n\n    return $bar\n  }\n\n  private _generateMenu (): JQuery {\n    const $container = $('<div class=\"block-batch-action-menu hidden\"/>')\n    const $button: any = $('<button type=\"button\" class=\"btn settings icon menubtn\">Actions</button>')\n      .appendTo($container)\n\n    const $expand = $('<li/>').append(this._generateAction('Expand', null))\n    const $collapse = $('<li/>').append(this._generateAction('Collapse', null))\n    const $enable = $('<li/>').append(this._generateAction('Enable', 'enabled'))\n    const $disable = $('<li/>').append(this._generateAction('Disable', 'disabled'))\n    const $delete = $('<li/>').append(this._generateAction('Delete', 'remove'))\n    this.$menu = $('<div class=\"menu\"/>')\n      .append('<ul class=\"padded\"/>')\n      .appendTo($container)\n    this.$menu.children('ul')\n      .append($expand)\n      .append($collapse)\n      .append($enable)\n      .append($disable)\n      .append($delete)\n\n    $button.menubtn()\n    let buttonsWidth = this.$buttons.width() ?? 0\n    this.$bar.on('resize', () => {\n      buttonsWidth ||= this.$buttons.width() ?? 0\n      const isMobile = (this.$bar.width() ?? 0) < buttonsWidth\n      this.$buttons.toggleClass('hidden', isMobile)\n      $container.toggleClass('hidden', !isMobile)\n    })\n\n    return $container\n  }\n\n  private _generateAction (label: string, icon: string|null, buttonClasses?: string): JQuery {\n    const isButton = typeof buttonClasses !== 'undefined'\n    const lowerCaseLabel = label.toLowerCase()\n    icon ??= lowerCaseLabel\n    const $action = $(`<${isButton ? 'button' : 'a'}/>`)\n      .attr({\n        'aria-label': label,\n        'data-bba-bn': `button.${lowerCaseLabel}`,\n        'data-icon': icon\n      })\n      .text(label)\n\n    if (isButton) {\n      $action.addClass(buttonClasses)\n    }\n\n    return $action\n  }\n\n  protected abstract getSelectedBlocks (): InputBlock[]\n\n  public expand (blocks: InputBlock[]): void {\n    blocks.forEach((block) => block.expand())\n  }\n\n  public collapse (blocks: InputBlock[]): void {\n    blocks.forEach((block) => block.collapse())\n  }\n\n  public abstract enable (blocks: InputBlock[]): void\n\n  public abstract disable (blocks: InputBlock[]): void\n\n  public abstract delete (blocks: InputBlock[]): void\n}\n\nclass MatrixBatchActionBar extends BlockBatchActionBar {\n  constructor (public readonly input: InputField) {\n    super(input, 'matrixblock', 'sel')\n  }\n\n  protected getSelectedBlocks (): MatrixInputBlock[] {\n    return this.input.$container\n      .find(`.${this.blockClass}.${this.blockSelectedClass}`)\n      .map((_, blockEl) => $(blockEl).data('block'))\n      .get()\n  }\n\n  public enable (blocks: MatrixInputBlock[]): void {\n    blocks.forEach((block) => block.enable())\n  }\n\n  public disable (blocks: MatrixInputBlock[]): void {\n    blocks.forEach((block) => block.disable())\n  }\n\n  public delete (blocks: MatrixInputBlock[]): void {\n    if (window.confirm('Are you sure you want to delete the selected blocks?')) {\n      blocks.forEach((block) => block.selfDestruct())\n    }\n  }\n}\n\nclass NeoBatchActionBar extends BlockBatchActionBar {\n  constructor (public readonly input: NeoInputField) {\n    super(input, 'ni_block', 'is-selected')\n  }\n\n  protected getSelectedBlocks (): NeoInputBlock[] {\n    return this.input.getBlocks().filter((block) => block.isSelected())\n  }\n\n  public enable (blocks: NeoInputBlock[]): void {\n    blocks.find((block) => !block.isEnabled())?.enable()\n  }\n\n  public disable (blocks: NeoInputBlock[]): void {\n    blocks.find((block) => block.isEnabled())?.disable()\n  }\n\n  public delete (blocks: NeoInputBlock[]): void {\n    if (window.confirm('Are you sure you want to delete the selected blocks?')) {\n      blocks.forEach((block) => this.input.removeBlock(block))\n    }\n  }\n}\n\nexport { MatrixBatchActionBar, NeoBatchActionBar }\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { MatrixBatchActionBar, NeoBatchActionBar } from './BlockBatchActionBar'\nimport { InputField, NeoInputField } from './types/InputField'\nimport '../styles/main.scss'\n\ninterface MatrixAfterInitEvent {\n  target: InputField\n}\n\ninterface NeoAfterInitEvent {\n  target: NeoInputField\n}\n\nconst actionBars = []\n\nGarnish.on(Craft.MatrixInput, 'afterInit', (e: MatrixAfterInitEvent) => {\n  actionBars.push(new MatrixBatchActionBar(e.target))\n})\n\nif (typeof Neo?.Input !== 'undefined') {\n  Garnish.on(Neo.Input, 'afterInit', (e: NeoAfterInitEvent) => {\n    actionBars.push(new NeoBatchActionBar(e.target))\n  })\n}\n"],"names":["BlockBatchActionBar","constructor","input","blockClass","blockSelectedClass","this","$bar","$","prependTo","$container","$buttons","generateButtons","$menuContainer","_generateMenu","$actions","add","$menu","find","on","e","preventDefault","expand","getSelectedBlocks","collapse","enable","disable","delete","$expand","_generateAction","$collapse","$enable","$disable","$delete","append","$button","appendTo","children","menubtn","buttonsWidth","width","isMobile","toggleClass","label","icon","buttonClasses","isButton","lowerCaseLabel","toLowerCase","$action","attr","text","addClass","blocks","forEach","block","MatrixBatchActionBar","super","map","_","blockEl","data","get","window","confirm","selfDestruct","NeoBatchActionBar","getBlocks","filter","isSelected","isEnabled","removeBlock","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","r","Symbol","toStringTag","Object","defineProperty","value","actionBars","Garnish","Craft","MatrixInput","push","target","Neo","Input"],"sourceRoot":""}